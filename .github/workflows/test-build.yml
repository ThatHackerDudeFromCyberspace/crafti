name: Test Build

on:
  push:
    branches: [ master ]

jobs:
  build-crafti:
    runs-on: ubuntu-latest
    
    steps:
    - uses: actions/checkout@v3
    
    - name: Install Dependancies
      run: |
          sudo apt update
          sudo apt install git gcc binutils libgmp-dev libmpfr-dev libmpc-dev zlib1g zlib1g-dev wget libboost-program-options-dev sed -y
          
    - name: Copy Ndless SDK Tools
      run: |
          cp -r $HOME/work/crafti/crafti/.github/workflows/ndless-sdk-bin/* ./
          ls
          
    - name: Build Crafti
      run: |
          make all
          ls release
