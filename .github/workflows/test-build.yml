name: Test Build

on:
  push:
    branches: [ master ]

jobs:
  build-crafti:
    runs-on: ubuntu-latest
    
    steps:
    - uses: actions/checkout@v3
    
    - name: Install Dependancies
      run: |
          sudo apt update
          sudo apt install git build-essential autoconf automake gdb git libffi-dev zlib1g-dev gcc binutils libgmp-dev libmpfr-dev libmpc-dev zlib1g wget libboost-program-options-dev sed libc6 libc-bin -y
          
    - name: Set Path
      run: |
          echo "$HOME/work/crafti/crafti/.github/workflows/ndless-sdk-bin" >> $GITHUB_PATH
          
    - name: Build Crafti
      run: |
          make all
          ls release
